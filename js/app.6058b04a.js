(function(e){function t(t){for(var a,n,o=t[0],s=t[1],u=t[2],d=0,l=[];d<o.length;d++)n=o[d],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&l.push(i[n][0]),i[n]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);h&&h(t);while(l.length)l.shift()();return c.push.apply(c,u||[]),r()}function r(){for(var e,t=0;t<c.length;t++){for(var r=c[t],a=!0,n=1;n<r.length;n++){var o=r[n];0!==i[o]&&(a=!1)}a&&(c.splice(t--,1),e=s(s.s=r[0]))}return e}var a={},n={app:0},i={app:0},c=[];function o(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-3ee5d9ee":"56e73f2f","chunk-4a5f46a6":"e766b84b","chunk-51376838":"de1d4d65","chunk-5fd52348":"50e3c7f6","chunk-60c1b130":"c184c50c"}[e]+".js"}function s(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.e=function(e){var t=[],r={"chunk-3ee5d9ee":1,"chunk-51376838":1,"chunk-5fd52348":1,"chunk-60c1b130":1};n[e]?t.push(n[e]):0!==n[e]&&r[e]&&t.push(n[e]=new Promise((function(t,r){for(var a="css/"+({}[e]||e)+"."+{"chunk-3ee5d9ee":"dc401308","chunk-4a5f46a6":"31d6cfe0","chunk-51376838":"49830f27","chunk-5fd52348":"3499c8d3","chunk-60c1b130":"e1935ef2"}[e]+".css",i=s.p+a,c=document.getElementsByTagName("link"),o=0;o<c.length;o++){var u=c[o],d=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(d===a||d===i))return t()}var l=document.getElementsByTagName("style");for(o=0;o<l.length;o++){u=l[o],d=u.getAttribute("data-href");if(d===a||d===i)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var a=t&&t.target&&t.target.src||i,c=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=a,delete n[e],h.parentNode.removeChild(h),r(c)},h.href=i;var f=document.getElementsByTagName("head")[0];f.appendChild(h)})).then((function(){n[e]=0})));var a=i[e];if(0!==a)if(a)t.push(a[2]);else{var c=new Promise((function(t,r){a=i[e]=[t,r]}));t.push(a[2]=c);var u,d=document.createElement("script");d.charset="utf-8",d.timeout=120,s.nc&&d.setAttribute("nonce",s.nc),d.src=o(e);var l=new Error;u=function(t){d.onerror=d.onload=null,clearTimeout(h);var r=i[e];if(0!==r){if(r){var a=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+a+": "+n+")",l.name="ChunkLoadError",l.type=a,l.request=n,r[1](l)}i[e]=void 0}};var h=setTimeout((function(){u({type:"timeout",target:d})}),12e4);d.onerror=d.onload=u,document.head.appendChild(d)}return Promise.all(t)},s.m=e,s.c=a,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(r,a,function(t){return e[t]}.bind(null,a));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/foobar-autoplaylist/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var h=d;c.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},"034f":function(e,t,r){"use strict";r("85ec")},1577:function(e,t,r){"use strict";r("e45f")},"1eb3":function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var a=r("d4ec"),n=r("bee2"),i=r("ade3"),c=r("e881"),o=0,s=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c["a"].And;Object(a["a"])(this,e),Object(i["a"])(this,"negated",void 0),Object(i["a"])(this,"combinedWith",void 0),Object(i["a"])(this,"isLast",!1),Object(i["a"])(this,"parent",void 0),Object(i["a"])(this,"id",void 0),this.negated=t,this.combinedWith=n,this.parent=r,this.id=o++}return Object(n["a"])(e,[{key:"negateQuery",value:function(e){return this.negated?"NOT ".concat(e):e}}]),e}()},"225b":function(e,t,r){},"24da":function(e,t,r){"use strict";r.d(t,"b",(function(){return u})),r.d(t,"a",(function(){return d}));var a,n=r("b85c"),i=r("ade3"),c=(r("c975"),r("a434"),r("4160"),r("d3b7"),r("159b"),r("e881")),o=r("df26"),s=(a={},Object(i["a"])(a,c["d"].TextQuery,"text-field-query"),Object(i["a"])(a,c["d"].CombinedQuery,"combined-query-input"),Object(i["a"])(a,c["d"].TimeQuery,"time-query"),Object(i["a"])(a,c["d"].FreeSpace,"free-space-query"),a);function u(e){return s[e.type]}var d={removeQuery:function(e,t){var r=t.queries.indexOf(e);t.queries.splice(r,1),this.updateFirstAndLastQuery(e.parent||t)},updateFirstAndLastQuery:function(e){var t,r=Object(n["a"])(e.queries);try{for(r.s();!(t=r.n()).done;){var a=t.value;a.parent=e,a instanceof o["a"]&&this.updateFirstAndLastQuery(a)}}catch(c){r.e(c)}finally{r.f()}var i=e.queries.length;0!==i&&(e.queries.forEach((function(e){return e.isLast=!1})),e.queries[i-1].isLast=!0)}}},"48d8":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-row",{directives:[{name:"show",rawName:"v-show",value:!e.query.isLast,expression:"!query.isLast"}],staticClass:"justify-center pa-top-16"},[r("v-select",{staticClass:"width-100",attrs:{label:"Comparator",items:e.logicalOperators,dense:""},model:{value:e.query.combinedWith,callback:function(t){e.$set(e.query,"combinedWith",t)},expression:"query.combinedWith"}})],1)},n=[],i=r("d4ec"),c=r("257e"),o=r("262e"),s=r("2caf"),u=r("ade3"),d=(r("99af"),r("07ac"),r("9ab4")),l=r("e881"),h=r("2b0e"),f=r("2fe1"),p=function(e){Object(o["a"])(r,e);var t=Object(s["a"])(r);function r(){var e;Object(i["a"])(this,r);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n)),Object(u["a"])(Object(c["a"])(e),"logicalOperators",Object.values(l["a"])),e}return r}(h["a"]);p=Object(d["a"])([Object(f["a"])({props:{query:{type:Object}}})],p);var y=p,b=y,v=r("2877"),m=r("6544"),g=r.n(m),j=r("0fd9"),O=r("b974"),k=Object(v["a"])(b,a,n,!1,null,"fa9073fe",null);t["a"]=k.exports;g()(k,{VRow:j["a"],VSelect:O["a"]})},5865:function(e,t,r){},"85ec":function(e,t,r){},"89f8":function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var a=r("d4ec"),n=r("bee2"),i=r("257e"),c=r("262e"),o=r("2caf"),s=r("ade3"),u=(r("38cf"),r("99af"),r("e881")),d=r("1eb3"),l="  ",h=function(e){Object(c["a"])(r,e);var t=Object(o["a"])(r);function r(e,n,c,o){var d;return Object(a["a"])(this,r),d=t.call(this,c,o),Object(s["a"])(Object(i["a"])(d),"queries",void 0),Object(s["a"])(Object(i["a"])(d),"isRoot",void 0),Object(s["a"])(Object(i["a"])(d),"type",u["d"].CombinedQuery),d.isRoot=n,d.queries=e,d}return Object(n["a"])(r,[{key:"rawQuery",value:function(){var e="",t=this.queries.length,r=0,a=this.parent;while(void 0!==a)a=a.parent,r++;for(var n,i=l.repeat(r),c=l.repeat(Math.max(r-1,0)),o=0;o<t;o++){var s=this.queries[o];e+=o===t-1?s.rawQuery():"".concat(s.rawQuery(),"\n").concat(i).concat(s.combinedWith,"\n").concat(i)}return n=this.isRoot?e:"(\n".concat(i).concat(e,"\n").concat(c,")"),this.negateQuery(n)}}]),r}(d["a"])},a0fa:function(e,t,r){"use strict";r.d(t,"b",(function(){return h})),r.d(t,"a",(function(){return f}));var a=r("d4ec"),n=r("bee2"),i=r("257e"),c=r("262e"),o=r("2caf"),s=r("ade3"),u=(r("07ac"),r("caad"),r("2532"),r("99af"),r("1eb3")),d=r("e881"),l=r("d8cd"),h=Object.values(d["c"]),f=function(e){Object(c["a"])(r,e);var t=Object(o["a"])(r);function r(e,n,c){var o,u=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4?arguments[4]:void 0,h=arguments.length>5?arguments[5]:void 0;return Object(a["a"])(this,r),o=t.call(this,u,l,h),Object(s["a"])(Object(i["a"])(o),"field",void 0),Object(s["a"])(Object(i["a"])(o),"comparator",void 0),Object(s["a"])(Object(i["a"])(o),"comparedAgainst",void 0),Object(s["a"])(Object(i["a"])(o),"type",d["d"].TextQuery),o.field=e,o.comparator=n,o.comparedAgainst=c,o}return Object(n["a"])(r,[{key:"rawQuery",value:function(){var e=h.includes(this.comparator)||"string"!==typeof this.comparedAgainst||!this.comparedAgainst?"":" "+Object(l["c"])(this.comparedAgainst);return this.negateQuery("".concat(Object(l["c"])(this.field)," ").concat(this.comparator).concat(e))}}]),r}(u["a"])},a347:function(e,t,r){},a5e2:function(e,t,r){"use strict";r("5865")},cd49:function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a,n=r("2b0e"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",{attrs:{id:"app"}},[r("v-main",[r("header",{staticClass:"header"},[r("h2",[e._v("Foobar autoplaylist query editor")])]),r("v-container",{staticClass:"root-container"},[r("v-row",{attrs:{justify:"center"}},[r("HowToUse")],1),r("v-row",{attrs:{justify:"center"}},[r("QueryInputSelector",{ref:"text"})],1),r("v-row",{attrs:{justify:"center"}},[r("v-btn",{attrs:{color:"primary"},on:{click:e.generateQuery}},[e._v(" Generate query ")]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,n=t.attrs;return[r("v-btn",e._g(e._b({staticClass:"align-self-center",attrs:{icon:"","aria-label":"copy to clipboard"},on:{click:e.copyToClipboard}},"v-btn",n,!1),a),[r("v-icon",[e._v(" content_copy ")])],1)]}}])},[r("span",[e._v("Copy to clipboard")])])],1),r("v-row",{attrs:{justify:"center"}},[r("v-checkbox",{attrs:{label:"Display query as multiline (easier to read, can't be copy pasted directly to foobar unless copied with the copy button)"},model:{value:e.generateMultiline,callback:function(t){e.generateMultiline=t},expression:"generateMultiline"}})],1),e.query?r("v-row",{attrs:{justify:"center"}},[r("QueryHighlighted",{staticClass:"ma-5",attrs:{code:e.query}})],1):e._e(),r("v-row",{staticClass:"pa-4",attrs:{justify:"center"}},[r("v-btn",{attrs:{color:"primary"},on:{click:e.importQuery}},[e._v(" Import query ")])],1),r("v-row",[r("v-textarea",{attrs:{"error-messages":e.errors,placeholder:"Import query",outlined:"",id:"import-query"},model:{value:e.importedQuery,callback:function(t){e.importedQuery=t},expression:"importedQuery"}})],1)],1)],1)],1)},c=[],o=r("d4ec"),s=r("bee2"),u=r("257e"),d=r("262e"),l=r("2caf"),h=r("ade3"),f=(r("d3b7"),r("3ca3"),r("ddb0"),r("99af"),r("ac1f"),r("5319"),r("0d03"),r("25f0"),r("9ab4")),p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"input-group"},[0!==e.query.queries.length?r("v-container",{staticClass:"root-container"},[r("draggable",{attrs:{handle:".handle",group:{name:"queries"}},on:{end:e.sortQueries},model:{value:e.query.queries,callback:function(t){e.$set(e.query,"queries",t)},expression:"query.queries"}},e._l(e.query.queries,(function(t){return r("v-row",{key:t.id,staticClass:"flex-nowrap"},[r(e.getQueryComponent(t),{tag:"component",attrs:{query:t}}),r("v-icon",{staticClass:"handle"},[e._v(" drag_handle ")]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(a){var n=a.on,i=a.attrs;return[r("v-btn",e._g(e._b({staticClass:"align-self-center",attrs:{icon:"","aria-label":"remove query"},on:{click:function(){return e.removeQuery(t,e.query)}}},"v-btn",i,!1),n),[r("v-icon",[e._v(" delete_forever ")])],1)]}}],null,!0)},[r("span",[e._v("Remove query")])])],1)})),1)],1):e._e(),r("div",{staticClass:"display-flex flex-row align-center"},[r("v-select",{staticClass:"ma-5",attrs:{label:"Query type",items:e.queryInputs},model:{value:e.selectedQueryType,callback:function(t){e.selectedQueryType=t},expression:"selectedQueryType"}}),r("v-btn",{attrs:{color:"primary",id:"add-query-btn"},on:{click:e.addQuery}},[e._v("Add new query")])],1)],1)},y=[],b=r("e881"),v=r("df26"),m=r("2fe1"),g=(r("00b4"),r("1eb3")),j=r("d8cd"),O=function(e){Object(d["a"])(r,e);var t=Object(l["a"])(r);function r(e,a,n){var i,c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4?arguments[4]:void 0,d=arguments.length>5?arguments[5]:void 0;return Object(o["a"])(this,r),i=t.call(this,c,s,d),Object(h["a"])(Object(u["a"])(i),"field",void 0),Object(h["a"])(Object(u["a"])(i),"comparator",void 0),Object(h["a"])(Object(u["a"])(i),"comparedAgainst",void 0),Object(h["a"])(Object(u["a"])(i),"type",b["d"].TimeQuery),i.field=e,i.comparator=a,i.comparedAgainst=n,i}return Object(s["a"])(r,[{key:"validateTimeSyntax",value:function(e){return j["a"].test(e)}},{key:"rawQuery",value:function(){return this.validateTimeSyntax(this.comparedAgainst)||console.log("oopsie"),this.negateQuery("".concat(Object(j["c"])(this.field)," ").concat(this.comparator," ").concat(this.comparedAgainst))}}]),r}(g["a"]),k=function(e){Object(d["a"])(r,e);var t=Object(l["a"])(r);function r(e,a){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b["a"].And;return Object(o["a"])(this,r),n=t.call(this,!1,a,i),Object(h["a"])(Object(u["a"])(n),"queryText",void 0),Object(h["a"])(Object(u["a"])(n),"type",b["d"].FreeSpace),n.queryText=e,n}return Object(s["a"])(r,[{key:"rawQuery",value:function(){return this.queryText}}]),r}(g["a"]),q=r("d18b"),w=r("24da"),_=function(){return r.e("chunk-51376838").then(r.bind(null,"72fc"))},x=function(){return r.e("chunk-60c1b130").then(r.bind(null,"4c72"))},Q=function(){return r.e("chunk-3ee5d9ee").then(r.bind(null,"2ed9"))},T=function(){return r.e("chunk-4a5f46a6").then(r.t.bind(null,"b76a",7))},E=(a={},Object(h["a"])(a,b["d"].TextQuery,"text-field-query"),Object(h["a"])(a,b["d"].CombinedQuery,"combined-query-input"),Object(h["a"])(a,b["d"].TimeQuery,"time-query"),Object(h["a"])(a,b["d"].FreeSpace,"free-space-query"),a),S=[{text:"Metadata query",value:b["d"].TextQuery},{text:"Time query",value:b["d"].TimeQuery},{text:"Free editing space",value:b["d"].FreeSpace},{text:"Combine multiple queries",value:b["d"].CombinedQuery}],C=function(e){Object(d["a"])(r,e);var t=Object(l["a"])(r);function r(){var e;Object(o["a"])(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return e=t.call.apply(t,[this].concat(n)),Object(h["a"])(Object(u["a"])(e),"query",new v["a"]([],!0,!1)),Object(h["a"])(Object(u["a"])(e),"selectedQueryType",b["d"].TextQuery),Object(h["a"])(Object(u["a"])(e),"updateFirstAndLastQuery",w["a"].updateFirstAndLastQuery),Object(h["a"])(Object(u["a"])(e),"removeQuery",w["a"].removeQuery),e}return Object(s["a"])(r,[{key:"queryInputs",get:function(){return S}},{key:"getQueryComponent",value:function(e){return E[e.type]}},{key:"getQuery",value:function(){return console.log(this.query),this.query}},{key:"setQuery",value:function(e){this.query=e}},{key:"addQuery",value:function(){var e;switch(this.selectedQueryType){case b["d"].TextQuery:e=new v["b"]("","","");break;case b["d"].TimeQuery:e=new O("","","");break;case b["d"].FreeSpace:e=new k("");break;case b["d"].CombinedQuery:e=new v["a"]([],!1,!1);break;default:throw Error("Unsupported query type")}e.parent=this.query,this.query.queries.push(e),this.updateFirstAndLastQuery(e.parent)}},{key:"sortQueries",value:function(){this.updateFirstAndLastQuery(this.query)}}]),r}(n["a"]);C=Object(f["a"])([Object(m["a"])({components:{draggable:T,TextFieldQuery:_,TimeQuery:x,FreeSpaceQuery:q["a"],CombinedQueryInput:Q}})],C);var N=C,A=N,I=(r("d8a1"),r("2877")),F=r("6544"),L=r.n(F),W=r("8336"),R=r("a523"),V=r("132d"),$=r("0fd9"),M=r("b974"),P=r("3a2f"),D=Object(I["a"])(A,p,y,!1,null,"0bacda3d",null),B=D.exports;L()(D,{VBtn:W["a"],VContainer:R["a"],VIcon:V["a"],VRow:$["a"],VSelect:M["a"],VTooltip:P["a"]});var H=r("b85c"),U=(r("07ac"),r("fb6a"),r("caad"),r("2532"),r("a15b"),r("1e25"),r("4d63"),r("c607"),r("2c3e"),r("a0fa")),G=r("89f8"),Y=Object.values(b["a"]),z=function(){function e(t){Object(o["a"])(this,e),Object(h["a"])(this,"input",void 0),Object(h["a"])(this,"currentIndex",0),this.input=t}return Object(s["a"])(e,[{key:"peek",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.input.slice(this.currentIndex,this.currentIndex+e)}},{key:"consume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.currentIndex+=e,this.input[this.currentIndex-e]}},{key:"isEof",value:function(){return this.currentIndex===this.input.length}},{key:"backtrack",value:function(e){this.currentIndex-=e}},{key:"getRange",value:function(e,t){return this.input.slice(e,t)}}]),e}(),J=function(){function e(t){Object(o["a"])(this,e),Object(h["a"])(this,"reader",void 0),Object(h["a"])(this,"depth",0),Object(h["a"])(this,"statementTree",void 0),Object(h["a"])(this,"currentNode",void 0),this.reader=new z(t),this.statementTree=this.createNode(!1),this.currentNode=this.statementTree}return Object(s["a"])(e,[{key:"createNode",value:function(e){return{queries:[],children:[],combinedWith:null,negated:e}}},{key:"createStatement",value:function(e){return{query:[],original:"",startIdx:this.reader.currentIndex,combinedWith:null,negated:e}}},{key:"handleLogicalToken",value:function(e,t){e.combinedWith=t,this.addStatement(e)}},{key:"addStatement",value:function(e){e.original=this.reader.getRange(e.startIdx,this.reader.currentIndex),this.currentNode.queries.push(e)}},{key:"isWhitespace",value:function(e){return/\s/.test(e)}},{key:"skipWhitespace",value:function(){while(!this.reader.isEof()){var e=this.reader.peek();if(!this.isWhitespace(e))break;this.reader.consume()}}},{key:"parse",value:function(){while(!this.reader.isEof()){if(this.skipWhitespace(),this.reader.isEof())break;var e=this.isNegated(),t=this.reader.peek();if("("===t){this.depth++;var r=this.createNode(e);r.prevNode=this.currentNode,this.currentNode.children.push(r),this.currentNode.queries.push(r),this.currentNode=r,this.reader.consume()}else if(")"===t){if(this.depth--,this.reader.consume(),this.skipWhitespace(),this.reader.isEof())break;var a=this.reader.peek();if(")"===a){if(void 0===this.currentNode.prevNode)throw new SyntaxError("Expected node to contain prevNode at position ".concat(this.reader.currentIndex));this.currentNode=this.currentNode.prevNode;continue}var n=this.nextToken();if(!Y.includes(n))throw new SyntaxError("Could not parse node at position ".concat(this.reader.currentIndex,".\n            Expected one of ").concat(Y.join(", ")," but got ").concat(n));if(this.currentNode.combinedWith=n,void 0===this.currentNode.prevNode)throw new SyntaxError("Expected node to contain prevNode at position ".concat(this.reader.currentIndex));this.currentNode=this.currentNode.prevNode}else{var i=this.createStatement(e),c=this.nextWord();if(i.query.push(c),this.reader.isEof()||")"===this.reader.peek()){this.addStatement(i);continue}var o=this.nextToken();if(Y.includes(o)){this.handleLogicalToken(i,o);continue}if(!j["h"].has(o))throw new SyntaxError("Could not parse statement at position ".concat(this.reader.currentIndex,". Expected a built in operator but got a normal word."));if(i.query.push(o),this.reader.isEof()){this.addStatement(i);continue}var s=this.reader.peek();if(")"===s){this.addStatement(i);continue}if(/[A-Z]/.test(s)){var u=this.reader.currentIndex;if(o=this.nextToken(),Y.includes(o)){this.handleLogicalToken(i,o);continue}this.reader.currentIndex=u}if(c=this.nextWord(),i.query.push(c),this.reader.isEof()){this.addStatement(i);break}if(s=this.reader.peek(),")"===s){this.addStatement(i);continue}if(o=this.nextToken(),!Y.includes(o))throw new SyntaxError("Could not parse statement at position ".concat(this.reader.currentIndex,".\n            Expected one of ").concat(Y.join(", ")," but got ").concat(o));this.handleLogicalToken(i,o)}}if(0!==this.depth)throw new SyntaxError("Unmatched parentheses");return this.statementTree}},{key:"nextToken",value:function(){var e="";while(!this.reader.isEof()){var t=this.reader.peek();if(this.isWhitespace(t)||")"===t)break;this.reader.consume(),e+=t}return this.skipWhitespace(),e}},{key:"isNegated",value:function(){var e="NOT";return this.reader.peek(e.length)===e&&(this.reader.consume(e.length),this.skipWhitespace(),!0)}},{key:"nextWord",value:function(){var e="",t=!1,r=[];'"'===this.reader.peek()&&(this.reader.consume(),t=!0);var a=function(e){return Y.includes(e)||j["h"].has(e)};while(!this.reader.isEof()){var n=this.reader.consume();if(!t&&")"===n){a(e)?this.reader.backtrack(e.length+1):(this.reader.backtrack(1),r.push(e)),e="";break}if('"'===n&&'"'!==this.reader.peek()){if(!t)throw new SyntaxError("Unexpected quote in unquoted string at position ".concat(this.reader.currentIndex,".\n").concat(r.join(" ")).concat(n));r.push(e),e="";break}if(this.isWhitespace(n)){if(!t&&a(e)){this.reader.backtrack(e.length+1),e="";break}r.push(e),e=""}else e+=n}if(this.reader.isEof()&&""!==e){if(t)throw new SyntaxError("Unclosed quote when parsing ".concat(r.join(" ")," ").concat(e));a(e)?this.reader.backtrack(e.length+1):r.push(e.trimEnd())}return this.skipWhitespace(),r.join(" ")}}]),e}();function K(e,t){var r,a=e.query.length,n=e.query;if(2===a?j["e"].has(n[1])&&(r=new U["a"](n[0],n[1],null)):3===a&&(j["g"].has(n[1])&&j["a"].test(n[2])?r=new O(n[0],n[1],n[2]):j["h"].has(n[1])&&(r=new U["a"](n[0],n[1],n[2]))),void 0===r){var i=e.original;e.combinedWith&&(i=i.replace(new RegExp(" ".concat(e.combinedWith," *$")),"")),e.negated&&(i="NOT ".concat(i),e.negated=!1),r=new k(i)}return r.combinedWith=e.combinedWith,r.negated=e.negated,r.parent=t,r}var Z=function e(t){var r,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,i=new G["a"]([],a,t.negated,n),c=Object(H["a"])(t.queries);try{for(c.s();!(r=c.n()).done;){var o=r.value;"query"in o?i.queries.push(K(o,i)):i.queries.push(e(o,!1,i))}}catch(s){c.e(s)}finally{c.f()}return i.queries[i.queries.length-1].isLast=!0,i},X=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"how-to-use"},[r("h3",[e._v("How to use")]),e._m(0),r("details",[r("summary",[e._v("Creating a new query")]),r("ol",[e._m(1),r("li",[e._v(' Modify the wanted query until it\'s what you want. Refer to "Query types" on what each input does. ')]),r("li",[e._v(" Queries can be reordered by dragging them with the drag icon "),r("v-icon",{staticClass:"handle"},[e._v("drag_handle")]),e._v(". When using nested queries, queries can be dragged in and out of the gray boxes representing the nested query. ")],1),r("li",[e._v(" Queries can be deleted by clicking on the trash can icon "),r("v-icon",{staticStyle:{cursor:"pointer"}},[e._v("delete_forever")]),e._v(". Deleting a nested query will delete everything inside it as well. ")],1)])]),e._m(2)])},ee=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("details",[r("summary",[e._v("Importing a query")]),r("ol",[r("li",[e._v(" You can import an existing query by pasting it in the "),r("a",{attrs:{href:"#import-query"}},[e._v("import query")]),e._v(" textbox and then clicking on import query. ")]),r("li",[e._v(' After a successful import the imported query will be reformatted under the "Generate query" button. ')]),r("li",[e._v(" In case the generated query differs from the original or an error occurs during import when it should not, create an issue on the "),r("a",{attrs:{href:"https://github.com/s0hv/foobar-autoplaylist/issues",target:"_blank",rel:"noopener noreferrer"}},[e._v("GitHub repository")]),e._v(". ")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("li",[e._v(" Start by selecting the appropriate query type and then clicking "),r("a",{attrs:{href:"#add-query-btn"}},[e._v("add new query")]),e._v('. The type of query you\'ll most likely want to start with is metadata query. "Query types" has more information on each type of query. ')])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("details",[r("summary",[e._v("Query types")]),r("details",[r("summary",[e._v("General information on queries")]),r("ul",[r("li",[e._v(" Most fields have suggested values but will accept any arbitrary value unless otherwise specified. ")]),r("li",[e._v(" Each query has a NOT checkbox that will invert the result of the query if checked. ")]),r("li",[e._v(" Queries can be combined with either AND or OR logical operators. The input containing these options will show up when more than one query is used. ")])])]),r("details",[r("summary",[e._v("Metadata query")]),r("span",[e._v(" This type of query is used for text comparisons. The first field should be a metadata field (e.g. %artist%) or a function. The operator list contains operators that can be used for comparing two strings. The last input is the value the the first input is compared to. This can be any arbitrary value, metadata field or function. ")])]),r("details",[r("summary",[e._v("Time query")]),r("span",[e._v(" This type of query is used for date comparisons. The first field should be a metadata field or a function that returns a date. The second field contains the operator used to compare two dates. The last field is for a date input which only accepts values in the format YYYY-MM-DD hh:mm:ss. The accuracy can be changed with the slider below. ")])]),r("details",[r("summary",[e._v("Free editing space")]),r("span",[e._v(" You can write anything here in case some functionality is not possible to do using the existing queries. ")])]),r("details",[r("summary",[e._v("Combine multiple queries")]),r("span",[e._v(" This query does not have any inputs in it but you can drag other queries inside it. This query is the functional equivalent of brackets. ")])])])}],te=function(e){Object(d["a"])(r,e);var t=Object(l["a"])(r);function r(){return Object(o["a"])(this,r),t.apply(this,arguments)}return r}(n["a"]);te=Object(f["a"])([m["a"]],te);var re=te,ae=re,ne=(r("a5e2"),Object(I["a"])(ae,X,ee,!1,null,"3ced30bc",null)),ie=ne.exports;L()(ne,{VIcon:V["a"]});var ce=function(){return r.e("chunk-5fd52348").then(r.bind(null,"539a"))},oe=function(e){Object(d["a"])(r,e);var t=Object(l["a"])(r);function r(){var e;Object(o["a"])(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return e=t.call.apply(t,[this].concat(n)),Object(h["a"])(Object(u["a"])(e),"query",""),Object(h["a"])(Object(u["a"])(e),"importedQuery",""),Object(h["a"])(Object(u["a"])(e),"errors",[]),Object(h["a"])(Object(u["a"])(e),"generateMultiline",!0),Object(h["a"])(Object(u["a"])(e),"$refs",void 0),e}return Object(s["a"])(r,[{key:"singleLineQuery",value:function(e){return e.replace(/\s*\n\s*/g," ")}},{key:"copyToClipboard",value:function(){navigator.clipboard.writeText(this.singleLineQuery(this.query))}},{key:"generateQuery",value:function(){var e;this.query=(null===(e=this.$refs.text.getQuery())||void 0===e?void 0:e.rawQuery())||"",this.generateMultiline||(this.query=this.singleLineQuery(this.query))}},{key:"importQuery",value:function(){var e,t=new J(this.importedQuery);try{e=Z(t.parse())}catch(r){return void(this.errors=[r.toString()])}this.errors=[],this.$refs.text.setQuery(e),this.generateQuery()}}]),r}(n["a"]);oe=Object(f["a"])([Object(m["a"])({components:{HowToUse:ie,QueryInputSelector:B,QueryHighlighted:ce}})],oe);var se=oe,ue=se,de=(r("034f"),r("7496")),le=r("ac7c"),he=r("f6c4"),fe=r("a844"),pe=Object(I["a"])(ue,i,c,!1,null,null,null),ye=pe.exports;L()(pe,{VApp:de["a"],VBtn:W["a"],VCheckbox:le["a"],VContainer:R["a"],VIcon:V["a"],VMain:he["a"],VRow:$["a"],VTextarea:fe["a"],VTooltip:P["a"]});var be=r("f309");n["a"].use(be["a"]);var ve=new be["a"]({theme:{themes:{light:{primary:"#007BFF",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}},icons:{iconfont:"md"}}),me=(r("a347"),r("b6d0"));n["a"].use(me["a"]),new n["a"]({vuetify:ve,render:function(e){return e(ye)}}).$mount("#app")},d18b:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"query-row"},[r("v-row",[r("v-textarea",{staticClass:"resizable",attrs:{label:"Free text edit space",rows:"1","no-resize":!1,"hide-details":"","auto-grow":"","row-height":"46"},model:{value:e.query.queryText,callback:function(t){e.$set(e.query,"queryText",t)},expression:"query.queryText"}})],1),r("comparator",{attrs:{query:e.query}})],1)},n=[],i=r("d4ec"),c=r("257e"),o=r("262e"),s=r("2caf"),u=r("ade3"),d=(r("99af"),r("9ab4")),l=r("2fe1"),h=r("2b0e"),f=r("48d8"),p=function(e){Object(o["a"])(r,e);var t=Object(s["a"])(r);function r(){var e;Object(i["a"])(this,r);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n)),Object(u["a"])(Object(c["a"])(e),"$props",void 0),e}return r}(h["a"]);p=Object(d["a"])([Object(l["a"])({components:{Comparator:f["a"]},props:{query:{type:Object}}})],p);var y=p,b=y,v=(r("1577"),r("2877")),m=r("6544"),g=r.n(m),j=r("a523"),O=r("0fd9"),k=r("a844"),q=Object(v["a"])(b,a,n,!1,null,"114a999e",null);t["a"]=q.exports;g()(q,{VContainer:j["a"],VRow:O["a"],VTextarea:k["a"]})},d8a1:function(e,t,r){"use strict";r("225b")},d8cd:function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return c})),r.d(t,"c",(function(){return o})),r.d(t,"f",(function(){return s})),r.d(t,"d",(function(){return u})),r.d(t,"e",(function(){return d})),r.d(t,"g",(function(){return l})),r.d(t,"h",(function(){return h}));var a=r("2909"),n=(r("4d63"),r("c607"),r("ac1f"),r("2c3e"),r("25f0"),r("00b4"),r("5319"),r("99af"),r("d3b7"),r("6062"),r("3ca3"),r("ddb0"),r("07ac"),r("e881")),i="\\d{4}(-\\d{2}(-\\d{2}( \\d{2}(:\\d{2}(:\\d{2})?)?)?)?)?",c=new RegExp("^".concat(i,"$")),o=function(e){return/^%(\w|_)+%$/.test(e)||/^\d+(\.\d+)?$/.test(e)?e:'"'.concat(e.replace(/"/g,""),'"')},s=["%last_modified%","%first_played%","%last_played%","%added%"],u=["%album artist%","%album%","%artist%","%discnumber%","%totaldiscs%","%track artist%","%title%","%tracknumber%","%track number%","%bitrate%","%channels%","%codec%","%filesize%","%filesize_natural%","%length%","%length_ex%","%length_seconds%","%length_seconds_fp%","%length_samples%","%samplerate%","%replaygain_album_gain%","%replaygain_album_peak%","%replaygain_album_peak_db%","%replaygain_track_gain%","%replaygain_track_peak%","%replaygain_track_peak_db%","%filename%","%filename_ext%","%directoryname%","%path%","%_path_raw%","%subsong%","%play_count%","%played_per_day%","%rating%","%rating_stars%","%rating_stars_fixed%"].concat(s),d=new Set(Object.values(n["c"])),l=new Set(Object.values(n["f"])),h=new Set([].concat(Object(a["a"])(Object.values(n["e"])),Object(a["a"])(Object.values(n["c"])),Object(a["a"])(Object.values(n["b"])),Object(a["a"])(Object.values(n["f"]))))},df26:function(e,t,r){"use strict";var a=r("a0fa");r.d(t,"b",(function(){return a["a"]})),r.d(t,"c",(function(){return a["b"]}));var n=r("89f8");r.d(t,"a",(function(){return n["a"]}))},e45f:function(e,t,r){},e881:function(e,t,r){"use strict";var a,n,i,c,o,s;r.d(t,"a",(function(){return a})),r.d(t,"e",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"f",(function(){return c})),r.d(t,"b",(function(){return o})),r.d(t,"d",(function(){return s})),function(e){e["And"]="AND",e["Or"]="OR"}(a||(a={})),function(e){e["Has"]="HAS",e["Is"]="IS"}(n||(n={})),function(e){e["Missing"]="MISSING",e["Present"]="PRESENT"}(i||(i={})),function(e){e["Before"]="BEFORE",e["After"]="AFTER",e["Since"]="SINCE",e["During"]="DURING"}(c||(c={})),function(e){e["Greater"]="GREATER",e["Less"]="LESS",e["Equal"]="EQUAL"}(o||(o={})),function(e){e[e["TextQuery"]=0]="TextQuery",e[e["CombinedQuery"]=1]="CombinedQuery",e[e["TimeQuery"]=2]="TimeQuery",e[e["FreeSpace"]=3]="FreeSpace"}(s||(s={}))}});
//# sourceMappingURL=app.6058b04a.js.map